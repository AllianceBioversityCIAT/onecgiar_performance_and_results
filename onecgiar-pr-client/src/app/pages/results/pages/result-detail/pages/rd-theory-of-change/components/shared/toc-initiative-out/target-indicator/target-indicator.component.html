<br>
<div class="target">
    <div class="header-target">
        <div class="subheader">
            <div>
                <h4>Indicator statement: <span style=" font-weight: normal;">{{initiative?.statement}}</span></h4>
            </div>
        </div>
    </div>

    <div class="indicator-info">
        <div class="title">
            <div class="square"></div>
            <strong>Indicator info</strong>
        </div>
        <div class="indicator">

            <div class="one-description">
                <div class="indicator-item ">
                    <strong>Source:</strong>
                    <span *ngIf="initiative?.type_value != 'custom'">PRMF Framework</span><span
                        *ngIf="initiative?.type_value === 'custom'">Custom</span>
                </div>
                <div class="indicator-item">
                    <strong>Type:</strong>
                    <div>{{initiative?.type}}</div>
                </div>
            </div>
            <div class="indicator-item">
                <strong>Description:</strong>{{initiative?.indicator_description}}
            </div>

            <div class="indicator-item">
                <strong>Location:</strong>
                <span>{{initiative?.location}}</span> <span *ngIf="initiative?.full_geo != ''">(<span
                        *ngIf="initiative?.full_geo != ':null'">{{initiative?.full_geo}}</span>)</span>
            </div>
            <div style="margin-left: -20px;margin-top: -5px;">
                <app-alert-status [description]="descriptionAlert()"></app-alert-status>
            </div>
        </div>
    </div>

    <div class="line"></div>

    <div *ngIf="initiative.targets.length === 0">
        <app-alert-status [description]="'This indicator has no targets for the current year.'"
            status="warning"></app-alert-status>
    </div>

    <div class="messurement" *ngIf="initiative?.targets.length">
        <div class="title-mesuren">
            <div class="square-messerunet"></div>
            <div style="margin-top: -15px;">
                <h4>Measurement</h4>
            </div>
        </div>

        <div *ngFor="let item of initiative?.targets">
            <div appFeedbackValidation labelText="Contribution to an indicator's target" [isComplete]="!checkAlert()">
            </div>

            <div class="content-number">
                <div class="section-one">
                    <div class="info-messurent">
                        <div class="info-messurent-item target-number">
                            <strong>Target #{{sumIndicator(item.number_target)}}</strong>
                        </div>
                        <div class="info-messurent-item unit-messurent">
                            <strong>Unit of measure:</strong>{{initiative?.unit_messurament}}
                        </div>
                        <div class="info-messurent-item overall-target">
                            <strong>Overall target:</strong>{{item.target_value}}
                        </div>
                        <div class="info-messurent-item target-date">
                            <strong>Target date:</strong>{{item?.target_date | date: 'dd-MM-yyyy'}}
                        </div>
                    </div>
                </div>

                <div
                    *ngIf="initiative.type_value !== 'custom' && initiative.number_result_type !== initiative?.result.result_type_id && (initiative?.result.result_type_id !== 4 && initiative?.result.result_type_id !== 8)">
                    <app-alert-status status="warning"
                        [description]="descriptionWarning(initiative?.result.name, initiative?.type)"></app-alert-status>
                </div>

                <div *ngIf="!initiative?.is_calculable">
                    <app-alert-status status="warning"
                        *ngIf="initiative?.number_result_type ===  initiative?.result.result_type_id || initiative?.type_value === 'custom'"
                        [description]="'PRMS can only identify planned targets as numerical values. If your result framework has defined a target value with a unit of measurement other than numbers, PRMS will prompt you to indicate the contribution to the quantitative indicator using a text box.'"></app-alert-status>
                </div>

                <div
                    *ngIf="!initiative?.is_calculable && descriptionWarningYear(item?.target_date, initiative?.result.phase_year).is_alert === false && (initiative?.number_result_type ===  initiative?.result.result_type_id || initiative?.type_value === 'custom')">
                    <app-alert-status status="warning"
                        [description]="descriptionWarningYear(item?.target_date, initiative?.result).description"></app-alert-status>
                </div>

                <div style="margin-bottom: 10px;"
                    *ngIf="initiative.type_value === 'custom' || initiative.number_result_type ===  initiative?.result.result_type_id || (initiative?.result.result_type_id === 4 || initiative?.result.result_type_id === 8)">
                    <app-pr-yes-or-not id="table-desc" [label]="'Have you achieved the target of this indicator?'"
                        [required]="true" [(ngModel)]="item.indicator_question"
                        (selectOptionEvent)="item.contributing = item.indicator_question === true ? 1 : 0"></app-pr-yes-or-not>
                </div>

                <div class="table-indicator">
                    <table aria-describedby="table-desc">
                        <tr class="header"
                            *ngIf="initiative.type_value === 'custom' || initiative.number_result_type ===  initiative?.result.result_type_id || (initiative?.result.result_type_id === 4 || initiative?.result.result_type_id === 8)">
                            <th id="result_being_reported_is_calculable" class="row-one">Result being reported</th>
                            <th id="target_contribution_is_calculable">Target contribution</th>
                        </tr>

                        <tr
                            *ngIf="initiative.type_value === 'custom' || initiative.number_result_type ===  initiative?.result.result_type_id || (initiative?.result.result_type_id === 4 || initiative?.result.result_type_id === 8)">
                            <td>
                                <a [routerLink]="'/result/result-detail/' + initiative?.result.result_code"
                                    target="_blank" [queryParams]="{ phase: initiative?.result.version_id }">
                                    {{initiative?.result.result_code}} - {{initiative?.result.title}}
                                </a>
                            </td>

                            <td *ngIf="initiative?.is_calculable">
                                <input type="number" class="in-progress" min="0" style="width: 45px;"
                                    onkeypress="return event.charCode >= 48" [(ngModel)]="item.contributing" />
                                out of {{item.target_value}}
                            </td>

                            <td *ngIf="!initiative?.is_calculable">
                                <textarea type="text" class="input-not-calculable" [(ngModel)]="item.contributing"
                                    style="resize: none;">
                                    {{item.contributing}}
                                </textarea>
                            </td>
                        </tr>

                        <tr class="header">
                            <th id="other_results_contributing_is_calculable" class="row-one">
                                {{showOutComeOrOutput()}}
                            </th>
                            <th id="target_contribution_is_calculable_row_two">Target contribution</th>
                        </tr>

                        <tr *ngFor="let itemsContri of item?.results_contributing">
                            <td>
                                <a [routerLink]="'/result/result-detail/' + itemsContri?.result_code" target="_blank"
                                    [queryParams]="{ phase: initiative?.result.version_id }">
                                    {{itemsContri.result_code}} - {{itemsContri.title}}
                                </a>
                            </td>
                            <td> {{itemsContri.contributing_indicator}}
                                <span *ngIf="initiative?.is_calculable">out of {{item.target_value}}</span>
                            </td>
                        </tr>

                        <tr *ngIf="item?.results_contributing.length === 0">
                            <td colspan="2">Currently there are no other results contributing to this target.</td>
                        </tr>

                        <tr class="footer" *ngIf="initiative?.is_calculable">
                            <th id="overall_progress_is_calculable" class="row-one">
                                Overall progress against planned target
                            </th>
                            <th id="total_out_of_is_calculable">{{initiative?.total}} out of {{item.target_value}}</th>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <div class="bigger-line"></div>

</div>